name: Testing variable inb-out

on:
  push:
    branches: [ master ]

jobs:

  my-job:
     
    runs-on: windows-latest

    env:
      anyParam: 'any'
    
    steps:
      
      - uses: actions/checkout@v1
      - name: Run a one-line script that generates output
        run: powershell ./incrementVersion.ps1

      - name: Print out previously set env. variable
        run: powershell Write-Host $env:BUILDING_VERSION

      - name: Run a one-line script that grabs previous output
        run: powershell ./showVersion.ps1 -versionParameter $env:BUILDING_VERSION

      - name: Test to print out something
        run: powershell Write-Host ${{ secrets.NUGET_API_KEY }}

      - name: Test to print out something
        run: powershell Write-Host $secrets.NUGET_API_KEY

      - name: Test to print out something
        run: powershell Write-Host secrets.NUGET_API_KEY

      - uses: hole19/git-tag-action@master
        env:
          TAG: v$env:BUILDING_VERSION
          GITHUB_TOKEN: ${{ secrets.NUGET_API_KEY }}